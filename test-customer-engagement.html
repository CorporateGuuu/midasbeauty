<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Engagement Features Test - Midas Beauty</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/customer-engagement.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            padding: 2rem;
            background: var(--pearl-white);
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--rich-white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 8px 32px var(--shadow-color);
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
        }
        .test-section h3 {
            color: var(--primary-gold);
            margin-bottom: 1rem;
        }
        .feature-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }
        .status-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
        }
        .status-success {
            background: #4CAF50;
        }
        .status-error {
            background: #f44336;
        }
        .test-button {
            background: var(--primary-gold);
            color: var(--deep-black);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            background: var(--accent-gold);
            transform: translateY(-2px);
        }
        .test-results {
            background: var(--pearl-white);
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ¤–ðŸ’¬ Customer Engagement Features Test</h1>
        <p>This page tests the AI-powered beauty advisor chatbot and WhatsApp integration features.</p>

        <div class="test-section">
            <h3>ðŸ¤– AI Beauty Advisor Chatbot</h3>
            <div id="chatbot-status">
                <div class="feature-status">
                    <div class="status-icon" id="chatbot-loaded-status">?</div>
                    <span>Chatbot JavaScript Loaded</span>
                </div>
                <div class="feature-status">
                    <div class="status-icon" id="chatbot-visible-status">?</div>
                    <span>Chatbot Button Visible</span>
                </div>
                <div class="feature-status">
                    <div class="status-icon" id="chatbot-functional-status">?</div>
                    <span>Chatbot Functionality Working</span>
                </div>
            </div>
            <button class="test-button" onclick="testChatbot()">Test Chatbot</button>
            <button class="test-button" onclick="openChatbot()">Open Chatbot</button>
            <button class="test-button" onclick="sendTestMessage()">Send Test Message</button>
        </div>

        <div class="test-section">
            <h3>ðŸ“± WhatsApp Integration</h3>
            <div id="whatsapp-status">
                <div class="feature-status">
                    <div class="status-icon" id="whatsapp-loaded-status">?</div>
                    <span>WhatsApp JavaScript Loaded</span>
                </div>
                <div class="feature-status">
                    <div class="status-icon" id="whatsapp-visible-status">?</div>
                    <span>WhatsApp Button Visible</span>
                </div>
                <div class="feature-status">
                    <div class="status-icon" id="whatsapp-functional-status">?</div>
                    <span>WhatsApp Functionality Working</span>
                </div>
            </div>
            <button class="test-button" onclick="testWhatsApp()">Test WhatsApp</button>
            <button class="test-button" onclick="showWhatsAppTooltip()">Show Tooltip</button>
            <button class="test-button" onclick="testWhatsAppMessage()">Test Message</button>
        </div>

        <div class="test-section">
            <h3>ðŸŽ¨ Visual & Accessibility Tests</h3>
            <button class="test-button" onclick="testAnimations()">Test Animations</button>
            <button class="test-button" onclick="testResponsive()">Test Responsive</button>
            <button class="test-button" onclick="testAccessibility()">Test Accessibility</button>
            <button class="test-button" onclick="testKeyboard()">Test Keyboard</button>
        </div>

        <div class="test-section">
            <h3>ðŸ“Š Test Results</h3>
            <div class="test-results" id="test-results">
                Click test buttons above to see results...
            </div>
        </div>
    </div>

    <!-- Load the customer engagement features -->
    <script src="js/chatbot.js"></script>
    <script src="js/whatsapp-integration.js"></script>

    <script>
        // Test functions
        function updateStatus(elementId, success) {
            const element = document.getElementById(elementId);
            element.className = `status-icon ${success ? 'status-success' : 'status-error'}`;
            element.innerHTML = success ? 'âœ“' : 'âœ—';
        }

        function logResult(message) {
            const results = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `[${timestamp}] ${message}\n`;
            results.scrollTop = results.scrollHeight;
        }

        function testChatbot() {
            logResult('Testing AI Beauty Advisor Chatbot...');
            
            // Test if chatbot is loaded
            const chatbotLoaded = typeof window.beautyAdvisorChatbot !== 'undefined';
            updateStatus('chatbot-loaded-status', chatbotLoaded);
            logResult(`Chatbot loaded: ${chatbotLoaded}`);

            // Test if chatbot button is visible
            const chatbotButton = document.getElementById('chatbot-toggle');
            const chatbotVisible = chatbotButton && chatbotButton.offsetParent !== null;
            updateStatus('chatbot-visible-status', chatbotVisible);
            logResult(`Chatbot button visible: ${chatbotVisible}`);

            // Test chatbot functionality
            const chatbotFunctional = chatbotLoaded && chatbotVisible && 
                                    typeof window.beautyAdvisorChatbot.toggleChatbot === 'function';
            updateStatus('chatbot-functional-status', chatbotFunctional);
            logResult(`Chatbot functional: ${chatbotFunctional}`);

            logResult('Chatbot test completed.\n');
        }

        function testWhatsApp() {
            logResult('Testing WhatsApp Integration...');
            
            // Test if WhatsApp is loaded
            const whatsappLoaded = typeof window.whatsappIntegration !== 'undefined';
            updateStatus('whatsapp-loaded-status', whatsappLoaded);
            logResult(`WhatsApp loaded: ${whatsappLoaded}`);

            // Test if WhatsApp button is visible
            const whatsappButton = document.getElementById('whatsapp-widget');
            const whatsappVisible = whatsappButton && whatsappButton.offsetParent !== null;
            updateStatus('whatsapp-visible-status', whatsappVisible);
            logResult(`WhatsApp button visible: ${whatsappVisible}`);

            // Test WhatsApp functionality
            const whatsappFunctional = whatsappLoaded && whatsappVisible && 
                                     typeof window.whatsappIntegration.toggleTooltip === 'function';
            updateStatus('whatsapp-functional-status', whatsappFunctional);
            logResult(`WhatsApp functional: ${whatsappFunctional}`);

            logResult('WhatsApp test completed.\n');
        }

        function openChatbot() {
            if (window.beautyAdvisorChatbot) {
                window.beautyAdvisorChatbot.openChatbot();
                logResult('Chatbot opened successfully.');
            } else {
                logResult('ERROR: Chatbot not available.');
            }
        }

        function sendTestMessage() {
            if (window.beautyAdvisorChatbot) {
                window.beautyAdvisorChatbot.sendMessage('Hello! I need skincare advice.');
                logResult('Test message sent to chatbot.');
            } else {
                logResult('ERROR: Chatbot not available.');
            }
        }

        function showWhatsAppTooltip() {
            if (window.whatsappIntegration) {
                window.whatsappIntegration.showTooltip();
                logResult('WhatsApp tooltip displayed.');
            } else {
                logResult('ERROR: WhatsApp integration not available.');
            }
        }

        function testWhatsAppMessage() {
            if (window.whatsappIntegration) {
                // Test without actually opening WhatsApp
                const message = window.whatsappIntegration.messages['product-inquiry'];
                logResult(`WhatsApp message template: ${message.substring(0, 50)}...`);
            } else {
                logResult('ERROR: WhatsApp integration not available.');
            }
        }

        function testAnimations() {
            logResult('Testing animations...');
            const chatbotButton = document.getElementById('chatbot-toggle');
            const whatsappButton = document.getElementById('whatsapp-button');
            
            if (chatbotButton) {
                chatbotButton.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    chatbotButton.style.transform = 'scale(1)';
                }, 500);
                logResult('Chatbot animation test completed.');
            }
            
            if (whatsappButton) {
                whatsappButton.classList.add('hover');
                setTimeout(() => {
                    whatsappButton.classList.remove('hover');
                }, 500);
                logResult('WhatsApp animation test completed.');
            }
        }

        function testResponsive() {
            logResult('Testing responsive design...');
            const viewport = {
                width: window.innerWidth,
                height: window.innerHeight
            };
            logResult(`Current viewport: ${viewport.width}x${viewport.height}`);
            
            if (viewport.width <= 768) {
                logResult('Mobile viewport detected - features should be optimized for mobile.');
            } else {
                logResult('Desktop viewport detected - features should display full functionality.');
            }
        }

        function testAccessibility() {
            logResult('Testing accessibility features...');
            const chatbotButton = document.getElementById('chatbot-toggle');
            const whatsappButton = document.getElementById('whatsapp-button');
            
            if (chatbotButton) {
                const hasAriaLabel = chatbotButton.hasAttribute('aria-label');
                logResult(`Chatbot aria-label: ${hasAriaLabel}`);
            }
            
            if (whatsappButton) {
                const hasTabIndex = whatsappButton.hasAttribute('tabindex') || whatsappButton.tabIndex >= 0;
                logResult(`WhatsApp keyboard accessible: ${hasTabIndex}`);
            }
        }

        function testKeyboard() {
            logResult('Testing keyboard navigation...');
            logResult('Try pressing Tab to navigate to buttons, Enter to activate, Escape to close.');
            
            // Focus on chatbot button
            const chatbotButton = document.getElementById('chatbot-toggle');
            if (chatbotButton) {
                chatbotButton.focus();
                logResult('Focused on chatbot button - press Enter to test.');
            }
        }

        // Auto-run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                logResult('Auto-running initial tests...\n');
                testChatbot();
                testWhatsApp();
                logResult('Initial tests completed. Use buttons above for detailed testing.');
            }, 1000);
        });
    </script>
</body>
</html>
